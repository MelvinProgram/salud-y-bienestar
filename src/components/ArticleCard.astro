---
import type { Article } from "../types/Article";

// Tipar props
const props = Astro.props as Article;

const imagesFitness = [
    '/assets/images/fitness/fitness1.jpg',
    '/assets/images/fitness/fitness2.jpg',
    '/assets/images/fitness/fitness3.jpg',
    '/assets/images/fitness/fitness4.jpg',
];

const imagesSaludDigital = [
    '/assets/images/saludDigital/salud-digital1.jpg',
    '/assets/images/saludDigital/salud-digital2.jpg',
    '/assets/images/saludDigital/salud-digital3.jpg',
    '/assets/images/saludDigital/salud-digital4.jpg',
];

// Destructurar
const { title, excerpt, date, category, image } = props;
console.log('Categoría recibida:', category);

const imagesArray = (): string[] => {
  if (props.category === "Fitness") {
    return imagesFitness;
  } else if (props.category === "SaludDigital") {
    return imagesSaludDigital;
  } else if (props.category === "Nutrición") {
    return [
      '/assets/images/nutricion/nutricion1.jpg',
      '/assets/images/nutricion/nutricion2.jpg',
      '/assets/images/nutricion/nutricion3.jpg',
      '/assets/images/nutricion/nutricion4.jpg',
    ];
  } else if (props.category === "Sueño") {
    return [
      '/assets/images/sueno/sueno1.jpg',
      '/assets/images/sueno/sueno2.jpg',
      '/assets/images/sueno/sueno3.jpg',
      '/assets/images/sueno/sueno4.jpg',
    ];

  } else {
    return [image]; // Imagen por defecto
  }
};

// Formatear fecha
const formattedDate = date.toLocaleDateString("es-ES", {
  year: "numeric",
  month: "short",
  day: "numeric",
});
---
<article class="bg-white border rounded-xl shadow-sm overflow-hidden hover:shadow-md transition">
  <a href={`/articles/${props.slug}`} class="block">
    <img 
      src={imagesArray()["0"]}
      alt={title}
      class="w-full h-full object-ccover"
      loading="lazy"
    />
  </a>

  <div class="p-4">
    <span class="text-xs font-bold uppercase text-indigo-600 mb-1 block">
      {category}
    </span>

    <a href={`/articles/${props.slug}`} class="block text-indigo-700 hover:text-yellow-500 transition duration-150">
      <h3 class="font-semibold text-lg leading-tight mb-2">
        {title}
      </h3>
    </a>

    <p class="text-sm text-gray-600 mb-3">
      {excerpt}
    </p>

    <div class="flex justify-between items-center text-xs text-gray-400">
      <span>{formattedDate}</span>
      <a href={`/articles/${props.slug}`} class="text-indigo-500 hover:text-indigo-700 font-medium">
        Leer Más →
      </a>
    </div>
  </div>
</article>
